<!DOCTYPE html>

<html lang="pt-BR">
    <head>
        <meta charset="UTF-8">
        <title>SwitchCode</title>
        <link rel="stylesheet" href="011-reset.css">
        <link rel="stylesheet" href="011-style.css">
    </head>
    <body class="corpo">
        <header class="cabecalho">
            <ul class="lista-linguagens">
                <li class="item underline-color-c">C</li>
                <li class="item underline-color-cpp">C++</li>
                <li class="item underline-color-csharp">C#</li>
                <li class="item underline-color-python">Python</li>
                <li class="item underline-color-javascript">JavaScript</li>
                <li class="item underline-color-java">Java</li>
                <li class="item underline-color-php">PHP</li>
                <li class="item underline-color-swift">Swift</li>
                <li class="item underline-color-go">Go</li>
                <li class="item underline-color-sql">Sql</li>
                <li class="item underline-color-ruby">Ruby</li>
                <li class="item underline-color-typescript">TypeScript</li>
            </ul>
        </header>
        <div class="artigo">
            <h1 class="titulo-h1">Números aleatórios em C</h1>            
            <hr class="linha-horizontal">
            <h2 class="titulo-h2">Funções e bibliotecas</h2>
            <p>Para gerar valores aleatórios/randômicos em C será necessário usar a seguinte função:</p>
            <br>
            <p class="codigo-input">rand();</p>
            <br>
            <p>Que necessita da biblioca:</p>
            <br>
            <p class="codigo-input">&ltstdio.h&gt</p>
            <br>
            <p><strong>Retorno:</strong> valores inteiros entre e incluindo 0 e 32767.</p>
            <p><strong>Pâmetros:</strong> nenhum.</p>
            <br>
            </p>Segue um exemplo:</p>
            <pre><br><code><p class="codigo-input">
#include &ltstdio.h&gt

int main(){
    int numeroAleatorio;
    for(int i=0; i<10; i++){
        numeroAleatorio=rand();
        printf("%d\n", numeroAleatorio);
    }
    return 0;
}
            </p></code><br></pre>
            <p>O programa exibirá:</p>
            <pre><br><code><p class="codigo-output">    
41
18467
6334
26500
19169
15724
11478
29358
26962
24464
            </p></code><br></pre>
            <p>Se executarmos de novo o programa exibirá os mesmos resultados. Ou seja, nas duas vezes que 
            executamos o retorno da função foi o mesmo. E se executarmos repetidas vezes esse código ele 
            exibirá os mesmos valores. Mas então essa função não gera valores aleatórios? Por si só não, 
            para isso precisamos incluir a seguinte função:</p>
            <br>
            <p class="codigo-input">srand();</p>
            <br>
            <p>Que necessita da biblioteca:</p>
            <br>
            <p class="codigo-input">&ltstdlib.h&gt</p>
            <br>
            <p><strong>Retorno:</strong> nenhum.</p>
            <p><strong>Parâmetros:</strong> valores inteiros sem sinal</p>
            <br>
            <p>Ela irá modificar a seed da função rand( ), mudando a seed mudamos a sequência de valores 
            aleatórios. Por isso precisa ser usada apenas uma vez antes de usar a função rand( ), mesmo que 
            você use várias vezes rand( ). Por padrão a seed é igual a 1. Logo se passarmos como parâmetro 
            o valor 1, o programa exibirá o mesmo de antes. Porém, se passarmos outro valor o resultado será 
            diferente.</p>
            <pre><br><code><p class="codigo-input">
#include &ltstdio.h&gt
#include &ltstdlib.h&gt

int main(){
    int numeroAleatorio;
    srand(2); 
    for(int i=0; i<10; i++){
        numeroAleatorio=rand();
        printf("%d\n", numeroAleatorio);
    }
    return 0;
}
            </p></code><br></pre>
            <p>O programa exibirá:</p>
            <pre><br><code><p class="codigo-output">
45
29216
24198
17795
29484
19650
14590
26431
10705
18316
            </p></code><br></pre>
            <p>Passando outros valores o resultado irá ser diferente a cada novo valor. Entretando, ainda 
            se executarmos o mesmo código mais de uma vez o resultado será igual. Como podemos resolver 
            isso? Isso poderia ser resolvido se a cada vez que executassemos o programa a função srand( ) 
            recebesse um parâmetro diferente. Para fazer isso iremos usar a função:</p>
            <br>
            <p class="codigo-input">time();</p>
            <br>
            <p>Que necessita da biblioteca</p>
            <br>
            <p class="codigo-input">&lttime.h&gt</p>
            <br>
            <p><strong>Retorno:</strong> segundos que se passaram desde 00:00:00 de 1 de Janeiro de 1970.</p>
            <p><strong>Parâmetros:</strong> para nosso usso passaremos NULL ou 0</p>
            <pre><br><code><p class="codigo-input">
#include &ltstdio.h&gt
#include &lttime.h&gt

int main(){
    int tempo;
    tempo=time(NULL); //Ou tempo=time(0);
    printf("%d", tempo);
    return 0;
}                
            </p></code><br></pre>
            <p>O programa exibiu:</p>
            <br>
            <p class="codigo-output">1671364746</p>
            <br>
            <p>Usando um convesor de segundos para anos da internet, o resultado foi 52 anos (estou 
            escrevendo este artigo em 2022). Agora só precisamos juntar tudo:</p>
            <pre><br><code><p class="codigo-input">
#include &ltstdio.h&gt
#include &ltstdlib.h&gt
#include &lttime.h&gt

int main(){
    int numeroAleatorio, tempo;
    tempo=time(NULL);
    srand(tempo); 
    for(int i=0; i<10; i++){
        numeroAleatorio=rand();
        printf("%d\n", numeroAleatorio);
    }
    return 0;
}
            </p></code><br></pre>
            <p>Ou seja, estamos passando um valor diferente a cada vez que rodarmos o programa como 
            parâmetro da função srand( ), que por sua vez irá modificar a seed da função rand( ). 
            Assim a cada vez que rodarmos o programa uma sequência aleatória de valores será gerada. 
            Por economia de código, é comum escrever:</p>
            <br>
            <p class="codigo-input">srand(time(NULL));</p>
            <br>
            <h2 class="titulo-h2">Limitando a faixa de valores aleatórios</h2>
            <p>Na maioria das vezes queremos gerar valores aleatórios dentro de uma faixa de específica, 
            por exemplo podemos querer que o menor seja 10 ou o maior seja 100 ou ainda que sejam de 10 
            a 100. Vamos ver como fazer isso.</p>
            <h3 class="titulo-h2">Limitando o maior valor</h3>
            <p>Primeiro vamos relembrar o operador que retorna o resto da divisão.</p>
            <br>
            <p class="codigo-input">29 % 10</p>
            <br>
            <p>O resultado será 9, pois 29 dividos por 10 é 2 e sobram 9. Analise o seguinte código:</p>
            <pre><br><code><p class="codigo-input">
#include &ltstdio.h&gt

int main(){
    int qualquerNumero, restoDivisao;
    scanf("%d", &qualquerNumero);
    restoDivisao=qualquerNumero%10;
    printf("%d", restoDivisao);
}               
            </p></code><br></pre>
            <p>Qual será o maior valor possível que o programa exibirá? 9, por exemplo quando 
            qualquerNumero valer 49. E qual será o menor valor possível? 0, por exemplo quando 
            qualquerNumero valer 50. Juntado com o que vimos:</p>
            <br>
            <p class="codigo-input">numeroAleatorio=rand()%100;</p>
            <br>
            <p>numeroAleatorio ficará limitado a uma faixa de valores de 0 a 99. Caso não queira se 
            lembrar todo vez que o maior valor será o limiteMaximo, nesse caso 100, menos 1, pode-se 
            fazer:</p>
            <br>
            <p class="codigo-input">numeroAleatorio=rand()%(limiteMaximo+1);</p>
            <br>
            <p>Nosso código ficará assim</p>
            <pre><br><code><p class="codigo-input">
#include &ltstdio.h&gt
#include &ltstdlib.h&gt
#include &lttime.h&gt

int main(){
    int numeroAleatorio, limiteMaximo;
    limiteMaximo=5;
    srand(time(NULL)); 
    for(int i=0; i<10; i++){
        numeroAleatorio=rand()%(limiteMaximo+1);
        printf("%d\n", numeroAleatorio);
    }
    return 0;
}                
            </p></code><br></pre>
            <p>O programa exibiu:</p>
            <pre><br><code><p class="codigo-output">
4
0
5
1
0
1
2
0
3
2                
            </p></code><br></pre>
            <h3 class="titulo-h2">Limitando o menor valor</h3>
            <p>Esse é mais simples, basta somar o menor valor desejado, por exemplo 20:</p>
            <br>
            <p class="codigo-input">numeroAleatorio=rand()+20; //numeros aleatorios de 20 a 32787</p>
            <br>
            <p>Mas fique atento, pois fazendo isso também estamos limitando o maior valor, que nesse caso 
            será 32767 + 20. Usando isso também podemos gerar valores aleatórios negativos, basta 
            subtrair o menor valor desejado:</p>
            <br>
            <p class="codigo-input">numeroAleatorio=rand()-20; //numeros aleatorios de -20 a 32747</p>
            <br>
            <p>Aqui também estaremos limitando o maior valor, que nesse caso será 32767 - 20. Veja como está o código:</p>
            <pre><br><code><p class="codigo-input">
#include &ltstdio.h&gt
#include &ltstdlib.h&gt
#include &lttime.h&gt

int main(){
    int numeroAleatorio, limiteMinimo;
    limiteMinimo=-10;
    srand(time(NULL)); 
    for(int i=0; i<10; i++){
        numeroAleatorio=rand()+limiteMinimo;
        printf("%d\n", numeroAleatorio);
    }
    return 0;
}        
            </p></code><br></pre>
            <h3 class="titulo-h2">Limitando o maior e o menor valor</h3>
            <p>Unindo tudo chegamos ao seguinte:</p>
            <br>
            <p class="codigo-input">numeroAleatorio=limiteMinimo+(rand()%(limiteMaximo+1));</p>
            <br>
            <p>Veja como está o código completo</p>
            <pre><br><code><p class="codigo-input">
#include &ltstdio.h&gt
#include &ltstdlib.h&gt
#include &lttime.h&gt

int main(){
    int numeroAleatorio, limiteMinimo, limiteMaximo;
    limiteMinimo=2;
    limiteMaximo=6;
    srand(time(NULL)); 
    for(int i=0; i<10; i++){
        numeroAleatorio=limiteMinimo+(rand()%(limiteMaximo+1));
        printf("%d\n", numeroAleatorio);
    }
    return 0;
}                
            </p></code><br></pre>
            <p>Que exibiu:</p>
            <pre><br><code><p class="codigo-output">
6
3
8
2
3
3
7
6
4
4                
            </p></code><br></pre>
            <p>Execute esse programa várias vezes e perceba que o programa está gerando valores aleatórios 
            de 2 a 8. Mas nosso limite maximo não está definindo em 6? Sim, mas como dito anteriormente, 
            mudando o limite mínimo estamos mudando também o limite máximo. Para resolver isso:</p>
            <br>
            <p class="codigo-input">numeroAleatorio=limiteMinimo+(rand()%(limiteMaximo+1-limiteMinimo));</p>
            <br>
            <p>Para não precisar escrever todo esse código várias vezes podemos criar uma função:</p>
            <pre><br><code><p class="codigo-input">
#include &ltstdio.h&gt
#include &ltstdlib.h&gt
#include &lttime.h&gt

int sorteia(int limiteMinimo, int limiteMaximo);

int main(){
    int numeroAleatorio;
    srand(time(NULL)); 
    for(int i=0; i<10; i++){
        numeroAleatorio=sorteia(-2, 4);
        printf("%d\n", numeroAleatorio);
    }
    return 0;
}

int sorteia(int limiteMinimo, int limiteMaximo){
    return limiteMinimo+(rand()%(limiteMaximo+1-limiteMinimo));
}b
            </p></code><br></pre>
            <p>O programa exibiu:</p>
            <pre><br><code><p class="codigo-output">
-2
 0
 3
 1
-1
-2
 4
 1
 4
 3  
            </p></code><br></pre>
            <h2 class="titulo-h2">Valores aleatórios decimais</h2>
            <p>Até agora apenas geramos valores aleatórios inteiros. Vamos ver agora como gerar valores
            decimais. Analise o seguinte código:</p>
            <pre><br><code><p class="codigo-input">
#include &ltstdio.h&gt

int main(){
    float quociente, dividendo, limiteMaximo;
    dividendo=0;
    limiteMaximo=10;
    for(int i=0; i<=limiteMaximo; i++){
        quociente=dividendo/limiteMaximo;
        printf("%f\n", quociente);
        dividendo++;
    }
    return 0;
}                
            </p></code><br></pre>
            <p>O programa irá exbir:</p>
            <pre><br><code><p class="codigo-output">
0.000000
0.100000
0.200000
0.300000
0.400000
0.500000
0.600000
0.700000
0.800000
0.900000
1.000000                
            </p></code><br></pre>
            <p>Ou seja, se dividirmos os valores entre 0 e um limiteMaximo, nesse caso 10, pelo próprio 
            limiteMaximo, o que teremos será valores decimais entre e incluindo 0 e 1. Como aplicar 
            isso ao nosso programa? Lembra da faixa de valores da função rand( )? De 0 a 32767. 
            Portanto, basta dividirmos rand( ) por 32767 para obtermos valores entre 0 e 1.</p>
            <pre><br><code><p class="codigo-input">
#include &ltstdio.h&gt
#include &ltstdlib.h&gt
#include &lttime.h&gt

int main(){
    float numeroAleatorio;
    srand(time(NULL)); 
    for(int i=0; i<10; i++){
        numeroAleatorio=rand()/32767;
        printf("%f\n", numeroAleatorio);
    }
    return 0;
}                             
            </p></code><br></pre>
            <p>O programa exibirá:</p>
            <pre><br><code><p class="codigo-output">
0.000000
0.000000
0.000000
0.000000
0.000000
0.000000
0.000000
0.000000
0.000000
0.000000                           
            </p></code><br></pre>
            <p>Não é o que queremos. Por que isso aconteceu? Lembra dos casts? Quando dividimos rand( ) 
            por 32767, estamos dividindo dois valores inteiros, logo o resultado será um inteiro. 
            Para resolvermos isso podemos usar um cast do tipo float.</p>
            <br>
            <p class="codigo-input">numeroAleatorio=(float)rand()/32767;</p>
            <br>
            <p>E nosso programa exibiu o que buscamos:</p>
            <pre><br><code><p class="codigo-output">
0.276833
0.499344
0.317545
0.985290
0.376263
0.237190
0.403790
0.602557
0.570299
0.496078                          
            </p></code><br></pre>
            <p>Em vez de 32767 podemos usar RAND_MAX, que é uma constante definida na biblioteca 
            stdlib.h que vale 0x7FFF, representação de 32767 em hexadecimal.</p>
            <br>
            <p class="codigo-input">numeroAleatorio=(float)rand()/RAND_MAX;</p>
            <br>
            <p>Por curiosidade, caso esteja usando o Visual Studio Code ou o DevC++, clique sobre 
            &ltstdlib.h&gt segurando Ctrl, uma nova aba será aberta, agora aperte Ctrl + F para realizar uma 
            busca e digite no campo RAND_MAX, você encontrá a expressão seguinte, que nada mais é do
            que a declação de uma constante hexadecimal.</p>
            <br>
            <p class="codigo-input">#define RAND_MAX 0x7FFF</p>
            <h3 class="titulo-h2">Limitando o maior valor</h3>
            <p>Nosso programa está gerando valores entre e incluindo 0 e 1, para limitar o maior valor 
            basta multiplicar pelo pelo limiteMaximo, assim a faixa de valores ficará entre e 
            incluindo 0 e o limiteMaximo, nesse caso entre 0 e 4:</p>
            <pre><br><code><p class="codigo-input">
#include &ltstdio.h&gt
#include &ltstdlib.h&gt
#include &lttime.h&gt

int main(){
    float numeroAleatorio, limiteMaximo;
    limiteMaximo=4;
    srand(time(NULL)); 
    for(int i=0; i<10; i++){
        numeroAleatorio=((float)rand()/RAND_MAX)*limiteMaximo;
        printf("%f\n", numeroAleatorio); 
    }
    return 0;
}
            </p></code><br></pre>
            <p>O programa exibiu:</p>
            <pre><br><code><p class="codigo-output">
2.094790
3.973388
2.826991
3.921140
0.303964
0.266854
2.721274
1.295450
2.860439
3.004364
            </p></code><br></pre>
            <h3 class="titulo-h2">Limitando o menor valor</h3>
            <p>Basta somar o menor valor desejado. Assim também conseguimos obter números negativos. 
            Porém aqui o programa gera valores entre e incluindo 0 e 1, a faixa de valores será entre 
            e incluindo o limiteMinimo e o limiteMinimo + 1, nesse caso entre -4 e -3.</p>
            <pre><br><code><p class="codigo-input">
#include &ltstdio.h&gt
#include &ltstdlib.h&gt
#include &lttime.h&gt

int main(){
    float numeroAleatorio, limiteMinimo;
    limiteMinimo=-4;
    srand(time(NULL)); 
    for(int i=0; i<10; i++){
        numeroAleatorio=limiteMinimo+((float)rand()/RAND_MAX);
        printf("%f\n", numeroAleatorio);
    }
    return 0;
}
            </p></code><br></pre>
            <p>O programa exibiu:</p>
            <pre><br><code><p class="codigo-output">
-3.428388
-3.231300
-3.065889
-3.795434
-3.516831
-3.292978
-3.632160
-3.645467
-3.912015
-3.496109
            </p></code><br></pre>
            <h3 class="titulo-h2">Limitando o maior e o menor valor</h3>
            <p>Unindo os dois coneceitos temos:</p>
            <br>
            <p class="codigo-input">numeroAleatorio=limiteMinimo+((float)rand()/RAND_MAX)*limiteMaximo;</p>
            <br>
            <p>O programa fica assim:</p>
            <pre><br><code><p class="codigo-input">
#include &ltstdio.h&gt
#include &ltstdlib.h&gt
#include &lttime.h&gt

int main(){
    float numeroAleatorio, limiteMinimo, limiteMaximo;
    limiteMinimo=2;
    limiteMaximo=5;
    srand(time(NULL)); 
    for(int i=0; i<10; i++){
        numeroAleatorio=limiteMinimo+((float)rand()/RAND_MAX)*limiteMaximo;
        printf("%f\n", numeroAleatorio);
    }
    return 0;
}
            </p></code><br></pre>
            <p>O programa exibe</p>
            <pre><br><code><p class="codigo-output">
5.066957
3.035493
3.804254
6.494766
3.871243
6.588000
2.831629
6.619434
3.097293
6.446852
            </p></code><br></pre>
            <p>O programa gerou valores maiores que 5, como acontecia para valores aleatórios inteiros, 
            aqui também precisamos subtrair do limiteMaximo o limiteMinimo:</p>
            <br>
            <p class="codigo-input">numeroAleatorio=limiteMinimo+((float)rand()/RAND_MAX)*(limiteMaximo-limiteMinimo);</p>
            <br>
            <p>Para não precisarmos digitar o código várias vezes, podemos criar uma função.</p>
            <pre><br><code><p class="codigo-input">
#include &ltstdio.h&gt
#include &ltstdlib.h&gt
#include &lttime.h&gt

float sorteiaDecimais(float limiteMinimo, float limiteMaximo);

int main(){
    float numeroAleatorio;
    srand(time(NULL)); 
    for(int i=0; i<10; i++){
        numeroAleatorio=sorteiaDecimais(-2, 5.5);
        printf("%f\n", numeroAleatorio);      
    }
    return 0;
}

float sorteiaDecimais(float limiteMinimo, float limiteMaximo){
    return limiteMinimo+((float)rand()/RAND_MAX)*(limiteMaximo-limiteMinimo);
}
            </p></code><br></pre>
            <p>Observe que tanto o limiteMinimo quanto o limiteMaximo podem ser valores decimais.</p>
            <h2 class="titulo-h2">Unindo tudo</h2>
            <p>Agora temos duas funções, uma que gera valores inteiros aleatórios e outra que gera 
            valores decimais aleatórios. Porém podemos ter apenas uma, basta atribuir a função 
            sorteia a um inteiro, assim a parte decimal será descartada:</p>
            <pre><br><code><p class="codigo-input">
#include &ltstdio.h&gt
#include &ltstdlib.h&gt
#include &lttime.h&gt

float sorteia(float limiteMinimo, float limiteMaximo);

int main(){
    float numeroAleatorioDecimal;
    int numeroAleatorioInteiro;
    srand(time(NULL)); 
    printf("\nValores inteiros aleatorios:\n");
    for(int i=0; i<10; i++){
        numeroAleatorioInteiro=sorteia(-2, 5);
        printf("%d\n", numeroAleatorioInteiro);      
    }
    printf("\nValores decimais aleatorios:\n");
    for(int i=0; i<10; i++){
        numeroAleatorioDecimal=sorteia(-2, 5);
        printf("%f\n", numeroAleatorioDecimal);  
    }
    return 0;
}

float sorteia(float limiteMinimo, float limiteMaximo){
    return limiteMinimo+((float)rand()/(RAND_MAX))*(limiteMaximo-limiteMinimo);
}
            </p></code><br></pre>
            <p>O programa exibirá</p>
            <pre><br><code><p class="codigo-input">
Valores inteiros aleatorios:
-1
 2
 4
 3
 2
 2
 3
 4
 1
 1

Valores decimais aleatorios:
-1.743644
 3.920103
 2.346507
 0.719932
-0.573595
 2.968596
 4.428754
 4.077975
 1.678701
 3.819056 
            </p></code><br></pre>
            <p>Porém cuidado ao usar essa função para inteiros, pois a probabilidade de sorteia retornar, 
            nesse exemplo, 5 e bem menor do que retornar 4 ou outro valor, pois apenas 5.000000 será 5, 
            já 4.991475, 4.187415, 4.099874 etc. será 4.</p>
            <br>
            <p>Lembrando que há muita discusão na internet sobre valores pseudoaleatórios, além de que o 
            que mostrei nesse artigo é para uso casual pois não asseguro a qualidade desses números 
            randômicos.</p>
        </div>
    </body>
</html>
